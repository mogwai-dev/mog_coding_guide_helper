# Todo
30 分で実装できそうな作業単位に分ける

## Lexer で /* */ を識別できるようにする
2025/11/26 済

## とりあえず、Parser までかく
2025/11/27 済

## Lexer に Space を飛ばさない機能を追加する
2025/11/28 済

## Formatter でスペースを削除して表示する機能を付ける
2025/11/29 済

## 簡易 include 文機能の追加
2025/11/30 済

## 簡易 include 文のテスト
2025/11/30 済

## 簡易 define 文機能の追加
2025/11/30 済
・#include と #define の文末にコメントが入っていると、値の中に入ってしまう仕様になっている

## peek のリファクタリング
2025/12/2 済

## char_offsets のリファクタリング
2025/12/03 済
・token の line_end と column_end はもう少し考えたほうがいい

## 簡易 typedef 機能の追加
2025/12/05 済
・typedef は現状はまだ簡易実装。型テーブルができてない。typedef 宣言文を読めるだけ。

## 簡易 変数宣言機能の追加
2025/12/06 済
・修飾子は省くことにする。

## 簡易 struct 機能の追加
2025/12/07 済

## 簡易 関数定義 分析機能の追加
2025/12/08 済
・ブロック内は飛ばしている
・記憶域クラス指定子と修飾子は飛ばしている

## 簡易 enum, union 分析機能の追加
2025/12/08 済

## 簡易 extern 文の分析機能の追加
2025/12/08 済
・extern 文というものは実は存在しなくて、extern は記憶域クラス指定子なので宣言になる。

## 簡易 #if #ifdef #elif #else #endif の分析機能の追加
2025/12/10 済

## いくつかのフォーマッターの機能の追加
2025/12/10 済

## 文字連結機能の追加(バックスラッシュのあとに \n が入ったら次の行と結合する機能の追加)

## warning 出力機能の追加
2025/12/10 済

## vscode と結合
2025/12/10 済

## 記憶域クラス指定子 → 型修飾子 の順番で書いていない場合は警告を出す
### 背景
・コーディング規約・慣習
・Linux Kernel Coding Style、GNU Coding Standards、多くの企業のスタイルガイド
・可読性の観点から static const int の方が int const static より読みやすい
多くのプログラマーがこの順序に慣れている
・一貫性の観点からほとんどの既存コードがこの順序を使用

## レキサーで next_token 関数を読み込んで戻り値を match にかけて解析しているが、self.now を match にかけて解析が終わったら前に進めるという形のほうがソースコードが複雑になりにくいのでリファクタリングしたほうがいい
2025/12/07 済

## next_token のために enum TokenKind を準備して Token 自体は struct にして TokenKine の各種類の中に持たせる
2025/12/07 済

## ポインタ型の完全サポート
2025/12/11 済
・基本型とポインタ層の表現
・const/volatile/restrict/atomic 修飾子のサポート
・多段ポインタ (int***, etc.) の解析
・型安全性診断機能 (CGH101-104)
・型情報を使ったフォーマット出力

---

# 車載ECU開発向け機能拡張

## MISRA-C ルールチェック機能の追加
### 優先度: 高
・危険な構文の検出 (goto, 多重ポインタ, キャスト等)
・MISRA-C:2012 の主要ルールに対応
・違反箇所の診断出力

## volatile ポインタの特別扱い
### 優先度: 高
・レジスタアクセス用の volatile ポインタの検証
・volatile の付け忘れ警告
・volatile の不適切な使用検出

## ビットフィールドのサポート
### 優先度: 中
・レジスタ定義でよく使われる struct ビットフィールドの解析
・ビットフィールド幅の検証
・アライメント問題の検出

## アライメント指定のサポート
### 優先度: 中
・__attribute__((aligned(N))) の解析
・__attribute__((packed)) の解析
・コンパイラ固有の属性構文対応

## 関数ポインタ型のサポート
### 優先度: 中
・コールバック実装用の関数ポインタ型解析
・typedef された関数ポインタの追跡
・関数ポインタの型安全性チェック

## マクロ展開の改善
### 優先度: 低
・条件コンパイル (#if, #ifdef) の評価
・マクロ定義の追跡と展開
・マクロ使用箇所の検証

